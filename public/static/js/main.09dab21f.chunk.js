(this["webpackJsonpmb-cli-crud"]=this["webpackJsonpmb-cli-crud"]||[]).push([[0],{123:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(9),l=t.n(o),c=(t(98),t(99),t(10)),i=t(72),m=t(49),s=t(168),u=t(159),d=t(154),p=t(163),g=t(158),E=t(162),h=t(155),v=t(161),f=t(153),b=t(46),y=t.n(b),w=t(73),C=t(152),S=t(40),k=t.n(S),x=t(151),N=t(27),I=t.n(N);function R(){return r.a.createElement(w.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(x.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var W=Object(C.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function O(){var e=W(),a=Object(n.useState)({email:"",password:""}),t=Object(m.a)(a,1)[0],o=function(e){t[e.target.name]=e.target.value,console.log(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{container:!0,component:"main",className:e.root},r.a.createElement(d.a,null),r.a.createElement(f.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),r.a.createElement(f.a,{item:!0,xs:12,sm:8,md:5,component:h.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(s.a,{className:e.avatar},r.a.createElement(y.a,null)),r.a.createElement(w.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault();var a=localStorage.getItem("token");console.log("EL TOKEN ",a);""!==t.email&&""!==t.password?k.a.post("https://api-mb-v1.herokuapp.com/users/login",t,{headers:{"Content-Type":"application/json",Authorization:a}}).then((function(e){!0===e.data.success?(I()("Acceso permitido","Bienvenido","success"),localStorage.setItem("statusUser",JSON.stringify(e.data.data)),setInterval((function(){window.location.replace("/accessmb")}),1e3)):(I()("Acceso denegado","Verifica tus credenciales","error"),console.log(e.data))})).catch((function(e){console.log("SERVER ERROR >: "+e)})):alert("Empty fields!!")}},r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:o}),r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:o}),r.a.createElement(g.a,{control:r.a.createElement(E.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(x.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(f.a,{item:!0},r.a.createElement(x.a,{href:"/registro",variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(v.a,{mt:5},r.a.createElement(R,null)))))))}var F=t(164),D=t(167),q=t(160);function A(){return r.a.createElement(w.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(x.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var U=Object(C.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},formControl:{margin:e.spacing(1),minWidth:120}}}));function j(){var e=U(),a=Object(n.useState)({name:"",lastname:"",email:"",password:"",rol:""}),t=Object(m.a)(a,1)[0],o=function(e){t[e.target.name]=e.target.value,console.log(t)};return r.a.createElement(f.a,{container:!0,component:"main",className:e.root},r.a.createElement(d.a,null),r.a.createElement(f.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),r.a.createElement(f.a,{item:!0,xs:12,sm:8,md:5,component:h.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(s.a,{className:e.avatar},r.a.createElement(y.a,null)),r.a.createElement(w.a,{component:"h1",variant:"h5"},"Reg\xedstrate"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault();""!==t.name&&""!==t.lastname&&""!==t.email&&""!==t.password&&""!==t.role?k.a.post("https://api-mb-v1.herokuapp.com/users/register",t).then((function(e){!0===e.data.success?(I()("Usuario Registrado exitosamente","Inicia sesi\xf3n","success"),setInterval((function(){localStorage.setItem("tokenMB",e.data.token),window.location.replace("/")}),2e3),console.log(e.data)):(I()("Error al crear usuario","Verifica los datos o intente otra vez","error"),console.log(e.data))})).catch((function(e){console.log("SERVER ERROR >: "+e)})):alert("Empty fields!!")}},r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Nombre",name:"name",autoFocus:!0,type:"text",onChange:o}),r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"lastname",label:"Apellido",type:"text",id:"Apellido",autoComplete:"current-password",onChange:o}),r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:o}),r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:o}),r.a.createElement("div",null,r.a.createElement(D.a,{className:e.formControl},r.a.createElement(F.a,{htmlFor:"age-native-simple"},"Age"),r.a.createElement(q.a,{native:!0,defaultValue:"",onChange:o,inputProps:{name:"rol",id:"age-native-simple"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"JUDE"},"JUDE"),r.a.createElement("option",{value:"MantE"},"MantE"),r.a.createElement("option",{value:"Cuda"},"Cuda")))),r.a.createElement(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign up"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(x.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(f.a,{item:!0},r.a.createElement(x.a,{href:"/",variant:"body2"},"\xbfYa tienes cuenta?"))),r.a.createElement(v.a,{mt:5},r.a.createElement(A,null))))))}function J(){var e=localStorage.getItem("statusUser");console.log(JSON.parse(e));var a=JSON.parse(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Bienvenido ",a.first_name),r.a.createElement("h2",null,"Correo ",a.email),r.a.createElement("h2",null,"Rol ",a.rol),r.a.createElement(u.a,{variant:"contained",color:"primary",href:"logout"},"Log out"))}var V=function(e){return localStorage.getItem("statusUser")?r.a.createElement(c.b,e):r.a.createElement(c.a,{to:"/"})},B=function(){return localStorage.removeItem("token"),localStorage.removeItem("statusUser"),I()("Cesi\xf3n cerrada","Bye","success"),setInterval((function(){}),2e3),r.a.createElement(c.a,{to:"/"})};var P=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/",component:O,exact:!0}),r.a.createElement(c.b,{path:"/registro",component:j,exact:!0}),r.a.createElement(c.b,{path:"/logout",component:B,exact:!0}),r.a.createElement(V,{path:"/accessmb",component:J,exact:!0}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,a,t){e.exports=t(123)},98:function(e,a,t){},99:function(e,a,t){}},[[93,1,2]]]);
//# sourceMappingURL=main.09dab21f.chunk.js.map